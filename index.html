<! DOCTYPE HTML>
<html>

	<head>
		<title>This is a touch controller</title>


	</head>

	<body >
		<canvas width="1000" height="1000" id="touchCanvas">
			canvas tag not supported
		</canvas>
		<script>
			var startX;
			var startY;
			var endX;
			var endY;
			
			
			var canvas = document.getElementById("touchCanvas");
			var context = canvas.getContext("2d");

			canvas.addEventListener("touchstart", downEvent, false);
			canvas.addEventListener("touchend", releaseEvent, false);

			context.clearRect(0, 0, canvas.width, canvas.height);
	        context.font = '18pt Calibri';
	        context.fillStyle = 'black';
		        
			

			function downEvent(event) {
				startX = event.targetTouches[0].pageX;
				startY = event.targetTouches[0].pageY;
			}

			function releaseEvent(event) {
				endX = event.targetTouches[0].pageX;
				endY = event.targetTouches[0].pageY;

				var resultX = startX - endX;
				var resultY = startY - endY;

				var absX = Math.abs(resultX);
				var absY = Math.abs(resultY);

				console.log("resultx=" + resultX + " absX=" + absX);
				console.log(" absY=" + absY);

				if(resultX < 0 && absX > 100 && absY < 50){
					console.log("Move right");
					writeMessage(canvas, "Move right")
				}
				else if(resultX > 0 && absX > 100 && absY < 50){
					console.log("Move left");
					writeMessage(canvas, "Move left")
				}
				else if( absX < 5 ) {
					console.log("Stop");
					writeMessage(canvas, "Stop")
				}
				else{
					writeMessage(canvas, "Try again")
				}
			}

			function writeMessage(canvas, message) {
		        var context = canvas.getContext('2d');
		        context.clearRect(0, 0, canvas.width, canvas.height);
		        context.font = '18pt Calibri';
		        context.fillStyle = 'black';
		        context.fillText(message, 10, 25);
		      }
		</script>
	</body>

</html>
